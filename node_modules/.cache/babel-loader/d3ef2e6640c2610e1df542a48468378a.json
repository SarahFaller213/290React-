{"ast":null,"code":"import _slicedToArray from \"/Users/yeonwoo/CS290-proto/final/StartIQ/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/Users/yeonwoo/CS290-proto/final/StartIQ/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/yeonwoo/CS290-proto/final/StartIQ/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/yeonwoo/CS290-proto/final/StartIQ/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/yeonwoo/CS290-proto/final/StartIQ/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/yeonwoo/CS290-proto/final/StartIQ/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/yeonwoo/CS290-proto/final/StartIQ/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/yeonwoo/CS290-proto/final/StartIQ/src/components/NewsFeed/index.js\";\nimport * as React from \"react\";\nimport ReactQuill from 'react-quill';\nimport './style.css';\nimport { Link } from 'react-router-dom';\nimport 'react-quill/dist/quill.snow.css';\nimport 'react-quill/dist/quill.bubble.css';\nimport { Col, Button, Form, Row, Modal, Dropdown } from 'react-bootstrap';\nimport { FirebaseContext } from '../Firebase';\nimport renderHTML from 'react-render-html';\n\nvar NewsFeedPage = function NewsFeedPage() {\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12\n    },\n    __self: this\n  }, React.createElement(FirebaseContext.Consumer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13\n    },\n    __self: this\n  }, function (firebase) {\n    return React.createElement(NewsFeed, {\n      firebase: firebase,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 14\n      },\n      __self: this\n    });\n  }));\n};\n\nvar SubmitButton = function SubmitButton() {\n  return React.createElement(\"span\", {\n    className: \"submit-idea px-2 py-1\",\n    variant: \"info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20\n    },\n    __self: this\n  }, \"Post\");\n};\n\nvar NewsFeed =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(NewsFeed, _React$Component);\n\n  function NewsFeed(props) {\n    var _this;\n\n    _classCallCheck(this, NewsFeed);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewsFeed).call(this, props));\n\n    _this.onChange = function (event) {\n      _this.setState({\n        comment: event.target.value\n      });\n    };\n\n    _this.onPost = function (evt, key) {\n      evt.preventDefault();\n\n      _this.props.firebase.putComment(_this.state.uid, key, _this.state.username, _this.state.comment).then(function () {\n        _this.props.firebase.getIdea(_this.state.uid).then(function (ideas) {\n          // ideas : { KEY -> user idea}\n          _this.setState({\n            ideas: ideas\n          });\n        });\n      });\n    };\n\n    _this.onComment = function (event) {\n      event.target.reset();\n\n      _this.setState({\n        comment: \"\"\n      });\n    };\n\n    _this.state = {\n      text: '',\n      ideas: [],\n      revisions: [],\n      comments: [],\n      uid: undefined,\n      username: undefined,\n      attachments: [],\n      profile: '',\n      ideaKey: \"\",\n      comment: \"\",\n      commentShow: false\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChange = _this.onChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.uploadRef = React.createRef();\n    return _this;\n  }\n\n  _createClass(NewsFeed, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.props.firebase.setAuthChangeHandler(function (user) {\n        if (user) {\n          _this2.setState({\n            uid: user.uid\n          });\n\n          _this2.props.firebase.getCreator(_this2.state.uid).then(function (username) {\n            _this2.setState({\n              username: username\n            }); // console.log(this.state.username)\n\n          });\n\n          _this2.props.firebase.getIdea(_this2.state.uid).then(function (ideas) {\n            // ideas : { KEY -> user idea}\n            _this2.setState({\n              ideas: ideas\n            });\n          });\n\n          _this2.props.firebase.getProfile(_this2.state.uid).then(function (profile) {\n            _this2.setState({\n              profile: profile\n            });\n          });\n        } else _this2.setState({\n          uid: undefined,\n          username: undefined\n        });\n      });\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(value) {\n      this.setState({\n        text: value\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      // ideas\n      var ideas = this.state.ideas.map(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            key = _ref2[0],\n            ideaInfo = _ref2[1];\n\n        var created_at = new Date(ideaInfo.created_at).toString();\n        var comments = !ideaInfo.comments ? [] : Object.values(ideaInfo.comments).map(function (_ref3) {\n          var _ref4 = _slicedToArray(_ref3, 2),\n              username = _ref4[0],\n              comment = _ref4[1];\n\n          return React.createElement(Form, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 87\n            },\n            __self: this\n          }, React.createElement(Form.Group, {\n            as: Row,\n            controlId: \"formPlaintextComment\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 88\n            },\n            __self: this\n          }, React.createElement(Form.Label, {\n            className: \"username_comment\",\n            column: true,\n            sm: 2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 89\n            },\n            __self: this\n          }, username), React.createElement(Col, {\n            sm: \"9\",\n            className: \"commentContext pt-2\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 92\n            },\n            __self: this\n          }, comment)));\n        });\n        var attachments = !ideaInfo.attachments ? [] : ideaInfo.attachments.map(function (_ref5, idx) {\n          var _ref6 = _slicedToArray(_ref5, 2),\n              filename = _ref6[0],\n              url = _ref6[1];\n\n          return React.createElement(\"div\", {\n            key: idx,\n            className: \"my-0 px-2 idea-attachments\",\n            style: {\n              \"borderTop\": idx == 0 ? \"solid rgb(223, 223, 223) 1pt\" : \"none\"\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 102\n            },\n            __self: this\n          }, React.createElement(\"p\", {\n            className: \"my-0 px-0 col-11 d-inline-block\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 103\n            },\n            __self: this\n          }, \" \", React.createElement(\"i\", {\n            className: \"fas fa-paperclip\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 103\n            },\n            __self: this\n          }), \" \", React.createElement(\"a\", {\n            href: url,\n            target: \"_blank\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 103\n            },\n            __self: this\n          }, filename)));\n        });\n        return React.createElement(\"div\", {\n          className: \"row dashboard\",\n          key: key,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col-8\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          className: \"createdAt\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }, \" \", created_at, \", posted by \", _this3.state.username, \" \")), React.createElement(\"div\", {\n          className: \"col-12\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, renderHTML(ideaInfo.idea), attachments, React.createElement(\"hr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }), React.createElement(Form, {\n          onSubmit: _this3.onComment,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }, React.createElement(Form.Group, {\n          as: Row,\n          controlId: \"formPlaintextComment\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }, React.createElement(Form.Label, {\n          className: \"username_comment\",\n          column: true,\n          sm: 2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        }, _this3.state.username), React.createElement(Col, {\n          sm: \"9\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        }, React.createElement(Form.Control, {\n          className: \"comment_input\",\n          type: \"Comment\",\n          onChange: _this3.onChange,\n          placeholder: \"Enter Your Comment...\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        })), React.createElement(Button, {\n          className: \"mr-4\",\n          type: \"submit\",\n          variant: \"light\",\n          onClick: function onClick(evt) {\n            return _this3.onPost(evt, key);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, \"Post\"))), comments));\n      });\n      return React.createElement(\"div\", {\n        className: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"title text-center mt-0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \"Idea Dashboard\"), React.createElement(\"div\", {\n        className: \"container-fluid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"my-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row ml-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"file\",\n        className: \"invisible\",\n        ref: this.uploadRef,\n        onChange: this.onUpload,\n        multiple: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"dashboard_profile col-2 px-3 text-center mt-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-10 offset-md-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"profile_img\",\n        src: this.state.profile.profileIMG,\n        alt: \"profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"dash_pro\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, this.state.username), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, \"Ideas: \", this.state.ideas.length, \" \")))), React.createElement(\"div\", {\n        className: \"col-9 px-3 mr-0 px-5 mt-4 idea-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, ideas))));\n    }\n  }]);\n\n  return NewsFeed;\n}(React.Component);\n\nexport default NewsFeedPage;","map":{"version":3,"sources":["/Users/yeonwoo/CS290-proto/final/StartIQ/src/components/NewsFeed/index.js"],"names":["React","ReactQuill","Link","Col","Button","Form","Row","Modal","Dropdown","FirebaseContext","renderHTML","NewsFeedPage","firebase","SubmitButton","NewsFeed","props","onChange","event","setState","comment","target","value","onPost","evt","key","preventDefault","putComment","state","uid","username","then","getIdea","ideas","onComment","reset","text","revisions","comments","undefined","attachments","profile","ideaKey","commentShow","handleChange","bind","uploadRef","createRef","setAuthChangeHandler","user","getCreator","getProfile","map","ideaInfo","created_at","Date","toString","Object","values","idx","filename","url","idea","onUpload","profileIMG","length","Component"],"mappings":"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","sourcesContent":["import * as React from \"react\"\nimport ReactQuill from 'react-quill';\nimport './style.css'\n import { Link } from 'react-router-dom'\nimport 'react-quill/dist/quill.snow.css';\nimport 'react-quill/dist/quill.bubble.css';\nimport { Col, Button, Form, Row, Modal, Dropdown } from 'react-bootstrap';\nimport {FirebaseContext} from '../Firebase';\nimport renderHTML from 'react-render-html';\n\nconst NewsFeedPage = () => (\n  <div>\n    <FirebaseContext.Consumer>\n      {firebase => <NewsFeed firebase={firebase}/>}\n    </FirebaseContext.Consumer>\n  </div>\n);\n\nconst SubmitButton = () => (\n  <span className = \"submit-idea px-2 py-1\" variant=\"info\">\n    Post\n  </span>\n);\n\n\nclass NewsFeed extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { text: '', ideas: [], revisions: [], comments: [], uid: undefined, username: undefined, attachments: [], profile: '', ideaKey: \"\", comment: \"\", commentShow: false}\n    this.handleChange = this.handleChange.bind(this)\n    this.onChange = this.onChange.bind(this)\n    this.uploadRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.props.firebase.setAuthChangeHandler((user) => {\n      if(user) {\n        this.setState({ uid: user.uid });\n        this.props.firebase.getCreator(this.state.uid).then(username => {\n          this.setState({username: username});\n          // console.log(this.state.username)\n        });\n        this.props.firebase.getIdea(this.state.uid).then(ideas => { // ideas : { KEY -> user idea}\n          this.setState({ideas : ideas});\n        });\n        this.props.firebase.getProfile(this.state.uid).then(profile => {\n          this.setState({profile : profile});\n        });\n      }\n      else this.setState({ uid: undefined, username: undefined });\n    });\n\n  }\n\n  handleChange(value) {\n    this.setState({ text: value });\n  }\n\n\n  onChange = event => {\n    this.setState({ comment: event.target.value });\n  };\n\n  onPost = (evt, key) => {\n    evt.preventDefault();\n    this.props.firebase.putComment(this.state.uid, key, this.state.username, this.state.comment).then(() => {\n      this.props.firebase.getIdea(this.state.uid).then(ideas => { // ideas : { KEY -> user idea}\n        this.setState({ideas : ideas});\n      });\n    });\n  }\n\n  onComment= (event) => {\n    event.target.reset();\n    this.setState({\n      comment: \"\"\n    })\n  }\n\n\n  render() {\n    // ideas\n    const ideas = this.state.ideas.map( ([key, ideaInfo]) => {\n      const created_at = (new Date(ideaInfo.created_at)).toString();\n      const comments = !ideaInfo.comments ? [] : Object.values(ideaInfo.comments).map(([username, comment]) => {\n        return (\n          <Form>\n            <Form.Group as={Row} controlId=\"formPlaintextComment\">\n              <Form.Label className = \"username_comment\" column sm={2}>\n                {username}\n              </Form.Label>\n              <Col sm=\"9\" className = \"commentContext pt-2\">\n                {comment}\n              </Col>\n            </Form.Group>\n          </Form>\n        )\n      });\n      \n      const attachments = !ideaInfo.attachments ? [] : ideaInfo.attachments.map(([filename, url], idx) => {\n        return (\n          <div key={idx} className=\"my-0 px-2 idea-attachments\" style={{ \"borderTop\": idx == 0 ? \"solid rgb(223, 223, 223) 1pt\" : \"none\" }}>\n            <p className=\"my-0 px-0 col-11 d-inline-block\"> <i className=\"fas fa-paperclip\"></i> <a href={url} target=\"_blank\">{filename}</a></p>\n          </div>\n        );\n      });\n\n      return (\n        <div className=\"row dashboard\" key={key}>\n\n          <div className=\"col-8\">\n            <p className = \"createdAt\"> {created_at}, posted by {this.state.username} </p>\n          </div>\n          <div className=\"col-12\">\n            {renderHTML(ideaInfo.idea)}\n            {attachments}\n            <hr></hr>\n            \n            <Form onSubmit = {this.onComment} >\n              <Form.Group as={Row} controlId=\"formPlaintextComment\">\n                <Form.Label className = \"username_comment\" column sm={2}>\n                {this.state.username}\n                </Form.Label>\n                <Col sm=\"9\">\n                  <Form.Control className = \"comment_input\" type=\"Comment\" onChange = {this.onChange} placeholder=\"Enter Your Comment...\" />\n                </Col>\n                <Button className = \"mr-4\" type=\"submit\" variant = \"light\" onClick = {(evt) => this.onPost(evt, key)}>Post</Button>\n              </Form.Group>\n            </Form>\n\n            {comments}\n\n          </div>\n          \n        </div>\n      )\n    });\n\n    return (      \n      <div className = \"main\">\n        <h1 className=\"title text-center mt-0\">Idea Dashboard</h1>\n        <div className=\"container-fluid\">\n          <div className=\"my-5\"></div>\n          <div className=\"row ml-5\">\n            \n            {/* hidden file input that receives multiple files to be uploaded */}\n            <input type=\"file\" className=\"invisible\" ref={this.uploadRef} onChange={this.onUpload} multiple></input>\n            \n            <div className = 'dashboard_profile col-2 px-3 text-center mt-5'>\n              <div className=\"col-10 offset-md-1\">\n                <img className = \"profile_img\" src={this.state.profile.profileIMG} alt=\"profile\"/>\n                <hr></hr>\n                <div className = \"dash_pro\">\n                  <p>{this.state.username}</p>\n                  <p>Ideas: {this.state.ideas.length} </p>\n                </div>\n              </div>\n            </div>\n\n            <div className='col-9 px-3 mr-0 px-5 mt-4 idea-wrapper'>\n              {ideas}\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default NewsFeedPage\n\n"]},"metadata":{},"sourceType":"module"}